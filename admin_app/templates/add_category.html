{% extends 'admin_base.html' %}

{% block title %}Add Category - SmashStrix{% endblock %}

{% block extra_css %}
  <style>
    /* Page-specific styles */
    @media (max-width: 640px) {
      .main-content {
        padding: 0 1rem; /* Ensure padding on mobile */
      }
    }
  </style>
{% endblock %}

{% block content %}
  <div class="container mx-auto py-10">
    <h2 class="text-2xl font-semibold mb-4">Add New Category</h2>
    <form method="post" class="bg-white rounded-lg p-6 shadow-md max-w-lg">
      {% csrf_token %}
      <div class="mb-4">
        <label class="block text-sm font-medium">Name</label>
        <input type="text" name="name" class="w-full border rounded p-2 mt-1" required>
      </div>
      <div class="mb-4">
        <label class="block text-sm font-medium">Description</label>
        <textarea name="description" class="w-full border rounded p-2 mt-1" rows="4"></textarea>
      </div>
      <div class="mb-4">
        <label class="block text-sm font-medium">Active (List in Shop)</label>
        <input type="checkbox" name="is_active" checked class="mt-1">
      </div>
      <div class="mb-4">
        <label class="block text-sm font-medium">Deleted</label>
        <input type="checkbox" name="is_deleted" class="mt-1">
      </div>
      <button type="submit" class="w-full bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Add Category</button>
    </form>
    <a href="{% url 'admin:category_list' %}" class="block text-center mt-4 text-blue-600 hover:underline">Back to Category Management</a>
  </div>

  <div id="django-messages" style="display: none;" data-messages='[
    {% for message in messages %}
      {"text": "{{ message|escapejs }}", "tags": "{{ message.tags|escapejs }}"},
    {% endfor %}
  ]'></div>
{% endblock %}

{% block extra_js %}
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script>
    // Handle form submission feedback
    document.addEventListener('DOMContentLoaded', () => {
      const messagesDiv = document.getElementById('django-messages');
      if (messagesDiv) {
        const messages = JSON.parse(messagesDiv.getAttribute('data-messages'));
        if (messages.length > 0) {
          const message = messages[0];
          Swal.fire({
            icon: message.tags,
            title: message.tags === 'error' ? 'Error' : 'Success',
            text: message.text,
            confirmButtonText: 'OK'
          });
        }
      }
    });
  </script>
{% endblock %}